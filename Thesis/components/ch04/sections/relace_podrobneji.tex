\section{Relace podrobněji}\label{sec:relace_podrobneji}
U relací ještě chvíli zůstaneme, neboť ty budou pro nás v dalším textu nejpodstatnější. Mezi nimi lze najít mnoho zvláštních typů, které jsou svojí strukturou zajímavější než ty, které jsme si ukazovali doteď. Pokud se čtenář do této chvíle stihl ztratit v záplavě nových pojmů a znalostí, doporučuji se vrátit k sekcím \ref{sec:relace} o relacích a \ref{sec:zobrazeni} o zobrazeních.

\subsection{Druhy relací}\label{subsec:druhy_relaci}
Zatím jsme si uvedli pouze jeden zvláštní typ relace, který nám (nejspíše) byl již trochu povědomý, a to sice zobrazení. Lze se však setkat i s relacemi, které jsou svojí povahou zcela odlišné. V této sekci si zavedeme dva takové typy. Nejdříve se však podíváme na nejdůležitější 4 druhy relací.\par
Ačkoliv jsme si zaváděli relaci obecně mezi dvěma množinami $X$ a $Y$, v dalším textu se omezíme již pouze na relace na množině.
\begin{definition}[Důležité druhy relací]
    Nechť $R$ je relace na množině $X$. Pak $R$ je
    \begin{enumerate}[label=(\roman*)]
        \item \emph{reflexivní}, jestliže $\forall x\in X: xRx$.
        \item \emph{symetrická}, jestliže $\forall x,y\in X: xRy \implies yRx$.
        \item \emph{tranzitivní}, jestliže $\forall x,y,z\in X: xRy \land yRz \implies xRz$.
        \item \emph{antisymetrická}, jestliže $\forall x,y\in X: xRy \land yRx \implies x=y$.
    \end{enumerate}
\end{definition}
Reflexivní relace je jednoduše taková relace, kdy jsou všechny prvky v relaci samy se sebou (viz \ref{fig:priklady_reflexivnich_relaci}).
\begin{figure}[h]
    \centering
    \begin{subfigure}{6cm}
        \centering
        \includegraphics[scale=\normalipe]{ch02_reflexivni_relace.pdf}
        \caption{Reflexivní relace na čtyřech prvcích.}
        \label{subfig:reflexivni_relace}
    \end{subfigure}
    \quad
    \begin{subfigure}{6cm}
        \centering
        \includegraphics[scale=\normalipe]{ch02_nejmensi_reflexivni_relace.pdf}
        \caption{Reflexivní relace na třech prvcích.}
        \label{subfig:nejmensi_reflexivni_relace}
    \end{subfigure}
    \caption{Příklady reflexivních relací.}
    \label{fig:priklady_reflexivnich_relaci}
\end{figure}
Speciálně obrázek \ref{subfig:nejmensi_reflexivni_relace} je příkladem nejmenší možné reflexivní relace. Z definice \ref{def:identita} můžeme vidět, že se jedná o \emph{identitu}.\par
Podobně si můžeme znázornit i symetrii na obrázku \ref{fig:priklad_symetricke_relace}.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_symetricka_relace.pdf}
    \caption{Symetrická relace na čtyřech prvcích.}
    \label{fig:priklad_symetricke_relace}
\end{figure}
Z obrázku \ref{fig:priklad_symetricke_relace} můžeme vidět, že mezi dvojicí prvků, které jsou v relaci, vedou šipky oběma směry.\par
U tranzitivity musí platit, že pokud máme šipku mezi $x$ a $y$ a zároveň mezi $y$ a $z$, pak musí být i šipka mezi $x$ a $z$ (viz \ref{fig:prilad_tranzitivni_relace}).
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_tranzitivni_relace.pdf}
    \caption{Tranzitivní relace na čtyřech prvních.}
    \label{fig:priklad_tranzitivni_relace}
\end{figure}
Antisymetrie je pravděpodobně nejtěžší z těchto druhů relací, co se týče definice. Zatímco u symetrie platí, že relace musí být "vzájemná", u antisymetrie naopak říkáme, že pokud jsou prvky ve "vzájemné" relaci, pak se jedná o tentýž prvek. Z toho si však můžeme uvědomit, že u antisymetrické relace nemůže tedy nastat, že by mezi dvěma prvky vedly šipky oběma směry, jak lze vidět na obrázku \ref{fig:priklad_antisymetricke_relace}.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_antisymetricka_relace.pdf}
    \caption{Antisymetrická relace na třech prvcích.}
    \label{fig:priklad_antisymetricke_relace}
\end{figure} 
Nyní si zadefinujeme další důležitý pojem v definici \ref{def:inverzni_relace}.
\begin{definition}[Inverzní relace]\label{def:inverzni_relace}
    Nechť $R$ je relace na množině $X$. \emph{Inverzní relací} k relaci $R$ nazýváme relaci
    \begin{equation*}
        R^{-1}=\set{(y,x) \admid xRy}.
    \end{equation*}
\end{definition}
Proč právě inverzní? Mějme libovolnou relaci $R\subseteq X\times Y$ a k ní inverzní relaci $R^{-1}$ (ta je naopak podmnožinou "obráceného" kartézského součinu $Y\times X$). Zkusme relace $R$ a $R^{-1}$ složit (pro připomenutí viz definice \ref{def:skladani_relaci}).
\begin{equation*}
    R\circ R^{-1}=\set{(x,z) \admid \exists y\in Y: xRy \land yR^{-1}z}
\end{equation*}
Ovšem víme, že když $xRy$, pak $yR^{-1}x$, což znamená, že $x(R\circ R^{-1})x$. Tedy složením získáme identitu:
\begin{equation*}
    R\circ R^{-1}=1_X.
\end{equation*}
Stejně je tomu i u zobrazení. Čtenář pravděpodobně již slyšel termín \emph{inverzní funkce}. Zde se nám tato znalost krásně propojuje se středoškolským učivem. Některé příklady jsou níže.
\createcnt{funcex_cnt}
\begin{enumerate}[label=(\roman*)]
\item Funkce $\map{f_{\printnstepcnt{funcex_cnt}}}{\R}{\R^+}$, kde $f_{\printcnt{funcex_cnt}}(x)=e^x$; inverzní funkce $\map{f_{\printcnt{funcex_cnt}}^{-1}}{\R^+}{\R}$, kde $f_{\printcnt{funcex_cnt}}^{-1}(x)=\ln{x}$.
\item \sloppy Funkce $\map{f_{\printnstepcnt{funcex_cnt}}}{\left\langle-\frac{\pi}{2},\frac{\pi}{2}\right\rangle}{\langle-1,1\rangle}$, kde $f_{\printcnt{funcex_cnt}}(x)=\sin{x}$; inverzní funkce ${\map{f_{\printcnt{funcex_cnt}}^{-1}}{\langle-1,1\rangle}{\left\langle-\frac{\pi}{2},\frac{\pi}{2}\right\rangle}}$, kde $f_{\printcnt{funcex_cnt}}^{-1}=\arcsin{x}$,
\item Funkce $\map{f_{\printnstepcnt{funcex_cnt}}}{\R}{\R}$, kde $f_{\printcnt{funcex_cnt}}(x)=x^3-1$; inverzní funkce $\map{f_{\printcnt{funcex_cnt}}^{-1}}{\R}{\R}$, kde $f_{\printcnt{funcex_cnt}}^{-1}(x)=\sqrt[3]{x+1}$.
\end{enumerate}
Je vidět, že složením libovolné $f_i$ s $f_i^{-1}$ dostaneme identitu $\big(f_i\circ f_i^{-1}\big)(x)=x$.\par

\subsection{Relace ekvivalence}\label{subsec:relace_ekvivalence}
Zmíněné druhy relací nám dovolují definovat dva jejich nejdůležitější typy, jednomu z nichž se budeme dále přednostně věnovat. Začneme prvním z nich.
\begin{definition}[Relace ekvivalence]\label{def:relace_ekvivalence}
    Nechť $R$ je relace na množině $X$. Řekneme, že $R$ je \emph{relací ekvivalence na $X$} (nebo jen \emph{ekvivalencí na $X$}), pokud je \emph{reflexivní}, \emph{symetrická} a \emph{tranzitivní}.
\end{definition}
Ač se to nemusí zdát, tento typ relace má velmi příjemné vlastnosti. Jak si ji představit? Příkladem může být třeba relace $R$ na množině $X=\set{x_1,\dots,x_7}$ znázorněná na obrázku \ref{fig:priklad_relace_ekvivalence} níže.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_ekvivalence.pdf}
    \caption{Relace ekvivalence $R$ na $X$.}
    \label{fig:priklad_relace_ekvivalence}
\end{figure}
Pokud by však byl např. prvek $x_3$ v relaci prvkem $x_4$, pak by již $R$ nebyla ekvivalencí, jak lze naopak vidět z obrázku \ref{fig:priklad_relace_neekvivalence}.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_neekvivalence.pdf}
    \caption{Relace $R \cup (x_3,x_4)$ na $X$.}
    \label{fig:priklad_relace_neekvivalence}
\end{figure}
Všimněte si, že na obrázku \ref{fig:priklad_relace_ekvivalence} jsou prvky rozděleny na "ostrůvky", kde v rámci každého z nich jsou spolu všechny prvky v relaci\footnote{U relace ekvivalence též říkáme, že prvky jsou spolu \emph{ekvivalentní}.}. (Zkuste si z definice rozmyslet, že to tak vždy musí být.) Zakreslovat relaci ekvivalence dosavadním se tak stává již celkem nevýhodným, neboť pro větší množství ekvivalentních prvků již zakreslovat všechny vztahy šipkami je v tomto případě poměrně zdlouhavý proces (např. pro 5 ekvivalentních prvků bychom museli kreslit 25 šipek). Úspornější a taktéž názornější pro nás bude si pouze schématicky rozdělit prvky do skupinek (relace mezi nimi z definice ekvivalence považujeme za samozřejmé), např. jako na obrázku \ref{fig:relace_ekvivalence_tridy}.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_ekvivalence_tridy.pdf}
    \caption{Schématické znázornění ekvivalence $R$ na $X$.}
    \label{fig:relace_ekvivalence_tridy}
\end{figure}
Definujme si nyní tyto "ostrůvky" trochu formálněji.
\begin{definition}[Třída ekvivalence]
    Nechť $R$ je relace ekvivalence na množině $X$ a nechť $x\in X$. Pak definujeme množinu
    \begin{equation*}
        [x]_R=\set{y \admid xRy},
    \end{equation*}
    kterou nazýváme \emph{třída ekvivalence $R$ určená prvkem $x$}.
\end{definition}
Třída ekvivalence $[x]_R$ jistého prvku $x$ tak obsahuje všechny prvky, které jsou s $x$ ekvivalentní. Z příkladu výše je vidět že platí:
\begin{itemize}
    \item $[x_1]_R=[x_2]_R=[x_3]_R=\set{x_1,x_2,x_3}$,
    \item $[x_4]_R=[x_5]_R=\set{x_4,x_5}$,
    \item $[x_6]_R=[x_7]_R=[x_8]_R=\set{x_6,x_7,x_8}$.
\end{itemize}
\begin{example}
    Další příklady relací ekvivalence a jejich tříd.
    \begin{enumerate}[label=(\roman*)]
        \item $(\N,=)$ (rovnost přirozených čísel) je relace ekvivalence, kde každý prvek tvoří samostatnou třídu ekvivalence.
        \begin{align*}
            [1]_R&=\set{1}\\
            [2]_R&=\set{2}\\
            &\vdots
        \end{align*}
        \item Relace \emph{"mít stejnou paritu"}\footnote{Tzn. obě čísla jsou sudá nebo lichá.} na množině $\Z$ je relace ekvivalence o dvou třídách (sudá a lichá čísla).
        \begin{align*}
            [1]_R&=\set{-1,1,-3,3,-5,5,\dots}\\
            [2]_R&=\set{0,-2,2,-4,4\dots}\\
            &\vdots
        \end{align*}
        \item Relace "mít stejný zbytek po celočíselném dělení 5" na množině $\Z$ je relace ekvivalence o deseti třídách (čísla 0--9 jako zbytek po celočíselném dělení).
        \begin{align*}
            [0]_R&=\set{0,5,10,\dots}\\
            [1]_R&=\set{1,6,11,\dots}\\
            [2]_R&=\set{2,7,12,\dots}\\
            [3]_R&=\set{3,8,13,\dots}\\
            [4]_R&=\set{4,9,14,\dots}
        \end{align*}
        \item Relace "mít stejnou absolutní hodnotu" na množině $\R$ je relace ekvivalence, kde každá třída obsahuje prvek $x$ a $-x$ pro všechna $x\in\R$.
        \begin{align*}
            [0]_R&=\set{0}\\
            [1]_R&=\set{-1,1}\\
            [\sqrt{2}]_R&=\set{\sqrt{2},-\sqrt{2}}\\
            [\sqrt[4]{30}]_R&=\set{\sqrt[4]{30},-\sqrt[4]{30}}\\
            &\vdots
        \end{align*}
    \end{enumerate}
\end{example}

\subsection{Relace uspořádání}\label{subsec:relace_usporadani}
Druhým a též asi nejpodstatnějším termínem pro nás bude tzv. \emph{uspořádání}. Oproti ekvivalenci zde bude pouze jedna změna v definici, avšak má velké důsledky.
\begin{definition}[Uspořádání]
    Nechť $R$ je relace na množině $X$. Řekneme, že $R$ je relací \emph{uspořádání} (též jen \emph{uspořádání}), pokud je \emph{reflexivní}, \emph{antisymetrická} a \emph{tranzitivní}.
\end{definition}
Začněme opět příklady, ať víme, jak si takový typ relace vlastně představit. Mějme relace $R_1$ a $R_2$ na obrázcích \ref{fig:relace_usporadani_1} a \ref{fig:relace_usporadani_2}. (Zkuste si sami rozmyslet, zda $R_1,R_2$ splňují podmínky uspořádání.)
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_usporadani_1.pdf}
    \caption{Relace uspořádání $R_1$ na šesti prvcích.}
    \label{fig:relace_usporadani_1}
\end{figure}
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_usporadani_2.pdf}
    \caption{Relace uspořádání $R_2$ na devíti prvcích.}
    \label{fig:relace_usporadani_2}
\end{figure}
Naopak ukázky modifikací relací $R_1,R_2$ na obrázcích \ref{fig:relace_neekvivalence_1} a \ref{fig:relace_neekvivalence_2} \textbf{nejsou} uspořádáními.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_neusporadani_1.pdf}
    \caption{Relace $R_1\cup (x_4,x_6)$, která není uspořádáním.}
    \label{fig:relace_neusporadani_1}
\end{figure}
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_neusporadani_2.pdf}
    \caption{Relace $R_2\setminus (x_6,x_9)$, která není uspořádáním.}
    \label{fig:relace_neusporadani_2}
\end{figure}
\begin{example}
    Další příklady uspořádání:
    \begin{enumerate}[label=(\roman*)]
        \item Relace "$\leq$" na množině $\N$ je uspořádání.
        \item Relace "$\geq$" na množině $\R$ je uspořádání.
        \item Relace "$\mid$" ("býti dělitelem") na množině $\N$ je uspořádání.
        \item Relace "$\subseteq$" na množině $\powset{X}$ je uspořádání, kde $X$ je konečná množina.
    \end{enumerate}
\end{example}
Stejně jako u ekvivalence, i zde si můžeme všimnout jisté redundance při zakreslování. Konkrétně dvojice vyplývající z tranzitivity a reflexivity bychom v těchto případech mohli klidně vynechat a považovat za samozřejmé. Zároveň jsme cíleně zakreslili relace $R_1$ a $R_2$ tak, aby šipky vedly pouze nahoru, neboť to činí obrázek přehlednějším. (Toto funguje díky tomu, že v relaci uspořádání se nemohou vyskytnout cykly kvůli podmínce antisymetrie a tranzitivity, nepočítáme-li cykly z reflexivity.) Zkuste se schválně podívat na znázornění relace $R_1$ na obrázku \ref{fig:relace_usporadani_1_jinak} pro srovnání.
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_usporadani_1_jinak.pdf}
    \caption{Relace $R_1$ zakreslená podle pořadí indexů prvků.}
    \label{fig:relace_usporadani_1_jinak}
\end{figure}
Tím se dostáváme k tzv. \emph{Hasseovým diagramům}, které se nám poskytují velmi komfortní reprezentaci uspořádání. Dosavadní způsoby reprezentace relací v sobě obsahovaly jistou míru libovůle, co do umístění prvků v diagramech, neboť důležité byly pouze šipky mezi nimi. Zde toto již neplatí, neboť umístěním prvků budeme určovat, které jsou společně v relaci. Přijmeme konvenci, že šipky mezi prvky povedou pouze směrem nahoru. Tzn. pokud $xRy$, pak $x$ bude nakresleno níž oproti $y$. Na obrázku \ref{fig:relace_usporadani_zakresleni} máme zakreslené uspořádání na množině $\set{y_1,y_2,y_3,y_4}$.
\begin{figure}[h]
    \centering
    \begin{subfigure}{6cm}
        \centering
        \includegraphics[scale=\normalipe]{ch02_relace_usporadani_standard.pdf}
        \caption{Standardní zakreslení $S$}
        \label{subfig:relace_usporadani_standard}
    \end{subfigure}
    \qquad
    \begin{subfigure}{6cm}
        \centering
        \includegraphics[scale=\normalipe]{ch02_relace_usporadani_hasseuv_diagram.pdf}
        \caption{Hasseův diagram $S$}
        \label{subfig:relace_usporadani_hasseuv_diagram}
    \end{subfigure}
    \caption{Relace $S$ zakreslená standardně a pomocí Hasseova diagramu.}
    \label{fig:relace_usporadani_zakresleni}
\end{figure}
Podobně bychom můžeme zakreslit i relaci $R_1$ z obrázku \ref{fig:relace_usporadani_1} (viz obrázek \ref{fig:relace_usporadani_1_hasseuv_diagram}).
\begin{figure}[h]
    \centering
    \includegraphics[scale=\normalipe]{ch02_relace_usporadani_1_hasseuv_diagram.pdf}
    \caption{Hasseův diagram relace $R_1$.}
    \label{fig:relace_usporadani_1_hasseuv_diagram}
\end{figure}
(Sekce inspirována \cite{MatousekNesetril2009}, str. 44--48 a str. 55)